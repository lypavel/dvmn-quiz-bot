# Telegram и VK боты для проведения викторины.

## Пример работы

* [Бот для телеграма](https://t.me/devman_lessons_bot)
    <details>
    <summary>Пример работы</summary>
    <img src="https://dvmn.org/filer/canonical/1569215494/324/" alt="Пример работы телеграм бота">
    </details>
* [Бот для ВК](https://vk.com/club226638798)
    <details>
    <summary>Пример работы</summary>
    <img src="https://dvmn.org/filer/canonical/1569215498/325/" alt="Пример работы вк бота">
    </details>

## Установка

1. Установите [Python 3.10.12](https://www.python.org/downloads/release/python-31012/) и, если нужно, создайте виртуальное окружение и активируйте его:
    ```sh
    python3 -m venv venv
    source venv/bin/activate
    ```
2. Установите необходимые зависимости с помощью `pip`:
    ```sh
    pip install -r requirements.txt
    ```
3. Установите Redis по [инструкции из документации](https://redis.io/).
4. Получите токены для ВК и телеграм ботов. Подробнее описано в соответствующих документациях: [ВК](https://dev.vk.com/ru/api/community-messages/getting-started), [Телеграм](https://core.telegram.org/bots/tutorial)
5. В корне проекта создайте файл `.env` и поместите в него следующие переменные окружения:
    ```env
    TG_BOT_TOKEN='токен телеграм бота'
    VK_API_TOKEN='токен вк бота'

    REDIS_DB_HOST='хост базы данных Redis'
    REDIS_DB_PORT='порт базы данных Redis'
    REDIS_DB_PASSWORD='пароль базы данных Redis', по-умолчанию `None`

    TG_LOGS_CHAT_ID='id чата в телеграме для отправки логов'

    ALL_QUESTIONS_FILE='имя файла, в который будет записан json с парами вопрос-ответ', по-умолчанию `questions.json`
    QUESTIONS_DIRECTORY='путь к директории с файлами, содержащими список вопросов и ответов', по-умолчанию `questions/`
    ```
## Создание вопросов
### 1 способ

1. Загрузите в директорию, указанную в `QUESTIONS_DIRECTORY` файлы с вопросами и ответами на них. Файл должен иметь следующий формат и кодировку `KOI8-R`:
    ```text
    Вопрос 1:
    Текст вопроса

    Ответ:
    Текст ответа


    Вопрос 2:
    Текст вопроса

    Ответ:
    Текст ответа
    ```
2. Запустите скрипт для создания вопросов:
    ```sh
    python3 questions.py
    ```
3. Результатом выполнения будет файл с именем, указанным в `ALL_QUESTIONS_FILE`, содержащий json-строку с парами вопрос-ответ.

### 2 способ

1. Вручную создайте файл с парами вопрос-ответ. Файл должен иметь следующий вид и иметь название, указанное в `ALL_QUESTION_FILES`:
    ```json
    {
      "Вопрос1": "Ответ1",
      "Вопрос2": "Ответ2"
    }
    ```
## Запуск

1. Запустите телеграм бота:
    ```sh
    python3 tg_bot.py
    ```
2. Запустите ВК бота:
    ```sh
    python3 vk_bot.py
    ```

***
Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [Devman](dvmn.org).